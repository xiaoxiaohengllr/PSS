
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/bootstrap-table-develop/dist/bootstrap-table.css" rel="stylesheet" />
    <link href="~/Content/bootstrap-select.min.css" rel="stylesheet" />
    <link href="~/layui/css/layui.css" rel="stylesheet" />
    <link href="~/iCheck/all.css" rel="stylesheet" />
</head>
<body>
    <div class="panel panel-default">
        <div class="panel-heading">客户资料</div>
        <div class="panel-body">
            <div id="btns" class="btn-group">
                <button class="btn btn-primary" id="AddCustomers"><i class="glyphicon glyphicon-save"></i>新增</button>
                <button class="btn btn-info" id="EditCustomers"><i class="glyphicon glyphicon-edit"></i>修改</button>
                <button class="btn btn-danger" id="DeleteCustomers"><i class="glyphicon glyphicon-remove"></i>删除</button>
                <form id="formSelectDepots" class="form-inline" style="float:left; margin-left:10px;">
                    <div class="form-group">
                        <label for="name">
                            公司名称或客户名称:
                        </label>
                        <input type="text" name="name" class="form-control" id="name" placeholder="请输入">
                    </div>
                    <div class="form-group">
                        <label for="CTID">客户类型:</label>
                        <select id="CTID" name="CTID" class="selectpicker" data-style="btn-default">
                            <option value="0">所有客户类型</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="CLID">客户等级:</label>
                        <select id="CLID" name="CLID" class="selectpicker" data-style="btn-default">
                            <option value="0">所有客户等级</option>
                        </select>
                    </div>
                    <button type="button" id="search" class="btn btn-default">查询</button>
                </form>
            </div>
            <table id="customers" class="table table-bordered table-striped table-hover"></table>
        </div>
    </div>
    <script src="~/Scripts/jquery-3.2.1.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/bootstrap-table-develop/dist/bootstrap-table.js"></script>
    <script src="~/bootstrap-table-develop/dist/locale/bootstrap-table-zh-CN.min.js"></script>
    <script src="~/bootstrap-table-develop/dist/extensions/export/bootstrap-table-export.min.js"></script>
    <script src="~/bootstrap-table-develop/dist/extensions/export/tableExport.js"></script>
    <script src="~/Scripts/bootstrap-select.min.js"></script>
    <script src="~/layui/layui.all.js"></script>
    <script src="~/Scripts/ajaxHelp.js"></script>
    <script src="~/iCheck/jquery.icheck.min.js"></script>
    <script>
        $(function () {
            //绑定表格数据
            $("#customers").bootstrapTable({
                method: "get",
                url: "http://localhost:43727/api/Customers",
                undefinedText: "",//当数据为 undefined 时显示的空字符
                pagination: true, //表格底部显示分页条
                paginationLoop: false,//禁用分页条无限循环的功能
                toolbar: "#btns",
                sidePagination: "server",
                showExport: true,
                pageNumber: 1,
                pageSize: 10,
                pageList: [5, 10, 20, "All"],
                paginationPreText: "上一页",
                paginationNextText: "下一页",
                showColumns: true,
                showRefresh: true,
                detailView: true,
                clickToSelect: true,
                detailFormatter: function (index, row) {
                    return '<table class="container-fluid"><tr><td><label>传真:</label> &nbsp; <span>' + row.CusFax + '</span></td><td><label>E-Mail:</label> &nbsp; <span>' + row.CusMail + '</span></td><td><label>手机:</label> &nbsp; <span>' + row.CusPhone + '</span></td><td><label>网站:</label> &nbsp; <span>' + row.CusBank + '</span></td><td><label>银行:</label> &nbsp; <span>' + row.CusBank + '</span></td><td><label>地址:</label> &nbsp; <span>' + row.CusAddress + '</span></td></tr><tr><td><label>开发行:</label> &nbsp; <span>' + row.CusBankCreate + '</span></td><td><label>帐号:</label> &nbsp; <span>' + row.CusGoogs + '</span></td><td><label>税号:</label> &nbsp; <span>' + row.CusSGoogs + '</span></td><td><label>交易类型:</label> &nbsp; <span>' + row.CusRateType + '</span></td><td><label>期初应收:</label> &nbsp; <span>' + row.CusBeginIn + '</span></td><td><label>客户积分:</label> &nbsp; <span>' + row.CusSorce + '</span></td></tr><tr><td colspan="6"><label>备注:</label> &nbsp; <span>' + row.CusDesc + '</span></td></tr></table>';
                },
                queryParams: function (params) {
                    params.name = "";
                    params.CLID = 0;
                    params.CTID = 0;
                    return params;
                },
                columns: [
                    { checkbox: true },
                    { field: "CusID", title: "客户编号" },
                    { field: "CusName", title: "客户名称" },
                    { field: "CusCompany", title: "公司名称" },
                    { field: "CusMan", title: "联系人" },
                    { field: "CusTel", title: "联系电话" },
                    { field: "CLName", title: "客户等级" },
                    { field: "CTName", title: "客户类型" },
                    {
                        field: "IsDefault", title: "默认供货商", formatter: function (value, row, index) {
                            return value ? "是" : "否";
                        }
                    },
                ]
            });
            LoadCustomerLevel();
            LoadCustomerTypes();

        });
        //加载客户等级
        function LoadCustomerLevel() {

        }
        //加载客户类型
        function LoadCustomerTypes() {

        }
    </script>
</body>
</html>
